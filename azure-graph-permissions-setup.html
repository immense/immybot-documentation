<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AzureAD/365 Graph Permissions | immy.bot</title>
    <meta name="description" content="A documentation suite for all things ImmyBot">
    <meta name="generator" content="VitePress v1.4.0">
    <link rel="preload stylesheet" href="/assets/style.CyaMcyxm.css" as="style">
    
    <script type="module" src="/assets/app.BH5JangM.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.B49Yz1nR.js">
    <link rel="modulepreload" href="/assets/chunks/theme.BlGa_csg.js">
    <link rel="modulepreload" href="/assets/chunks/katex.CvgdMzdh.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-dc8f04df.EiulR-Wk.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-622f9fc1.jRCzTDd8.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-v2-a33b4996.Bi4VKW4T.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-51d2b61e.Bn7zs0Zt.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-23af1bdb.CP58STRQ.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-a649f789.DoCFzELj.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-f86e0131.BsFw1Cz4.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-31d824a1.CDwzhPXx.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-a712a7d9.Cuhv-sbL.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-4a8b8217.DQzXDleT.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-eb878fee.DjIENAwc.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-66748113.DAIhfAwu.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-8298e144.D-XM2Wlz.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-296fb1cd.CtSouia_.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-35d39939.C4a_eA2M.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-6c43c13a.B335xOdE.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-de0d04b7.DVaaF4PC.js">
    <link rel="modulepreload" href="/assets/chunks/flowchart-elk-definition-930acc39.JQqAvNrf.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-6eaa3543.D0l5a3tM.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-b08d3ac4.nYL4MBJy.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-c599f8ec.KZTWFfb5.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-a8a0820c.BMITFE23.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/azure-graph-permissions-setup.md.u0ErxUE8.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script>(function(t,n,r,e,m){t[e]=t[e]||[],t[e].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var g=n.getElementsByTagName(r)[0],a=n.createElement(r),s=e!="dataLayer"?"&l="+e:"";a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+m+s,g.parentNode.insertBefore(a,g)})(window,document,"script","dataLayer","GTM-PF34XF88");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-d8b57b2d><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-d8b57b2d data-v-7ad780c2><div class="VPNavBar has-sidebar top" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-0ad69264><a class="title" href="/" data-v-0ad69264><!--[--><!--]--><!--[--><img class="VPImage logo" src="/immybot-glasses.png" alt data-v-ab19afbb><!--]--><span data-v-0ad69264>immy.bot</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="docsearch"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><!----><!----><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/immense/immybot-documentation" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><!----><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/immense/immybot-documentation" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-358b6670><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-d8b57b2d data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-d8b57b2d data-v-42c4c606><div class="curtain" data-v-42c4c606></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-42c4c606><span class="visually-hidden" id="sidebar-aria-label" data-v-42c4c606> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Introduction</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-edd2eed8><span class="vpi-chevron-right caret-icon" data-v-edd2eed8></span></div></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/getting-started.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Getting Started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/releases.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>What's New</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./add-users.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Add Users</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./onboarding.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Onboarding</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./recommended-deployments.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Recommended Deployments</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./terminology.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Terminology</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./troubleshooting.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Troubleshooting</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./user-roles.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>User Roles</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="./windows-sandbox.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Windows Sandbox</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible has-active" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Integrations</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-edd2eed8><span class="vpi-chevron-right caret-icon" data-v-edd2eed8></span></div></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/build-your-own-integration.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Build Your Own</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/connectsecure-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>ConnectSecure</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/connectwise-automate-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>ConnectWise Automate</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/connectwise-control-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>ConnectWise Control</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/connectwise-manage-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>ConnectWise Manage</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/ncentral-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>N-Central</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/ninjarmm-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>NinjaRMM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/halo-integration-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>HaloPSA</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/azure-graph-permissions-setup.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Azure</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0 collapsible" data-v-51288d80 data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Advanced</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-edd2eed8><span class="vpi-chevron-right caret-icon" data-v-edd2eed8></span></div></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/scripts.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Scripting Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/immy-commands.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Metascripts / Cloud Scripts</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-51288d80><section class="VPSidebarItem level-0" data-v-51288d80 data-v-edd2eed8><!----><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/FAQ.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Frequently Asked Questions</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-d8b57b2d data-v-9a6c75ad><div class="VPDoc has-sidebar has-aside" data-v-9a6c75ad data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _azure-graph-permissions-setup" data-v-e6f2a212><div><h1 id="azuread-365-graph-permissions" tabindex="-1">AzureAD/365 Graph Permissions <a class="header-anchor" href="#azuread-365-graph-permissions" aria-label="Permalink to &quot;AzureAD/365 Graph Permissions&quot;">​</a></h1><p>Your first ImmyBot tenant will be automatically linked to the Azure tenant that you signed up for ImmyBot with. You can link other ImmyBot tenants to Azure from the tenant Azure tab.</p><h2 id="linking-to-an-azure-tenant" tabindex="-1">Linking to an Azure Tenant <a class="header-anchor" href="#linking-to-an-azure-tenant" aria-label="Permalink to &quot;Linking to an Azure Tenant&quot;">​</a></h2><p>After creating an ImmyBot tenant, link it to an Azure tenant by navigating to the Azure tab in ImmyBot and entering the Azure tenant&#39;s principal id or domain and clicking <code>Save</code>.</p><h2 id="azure-permission-level" tabindex="-1">Azure Permission Level <a class="header-anchor" href="#azure-permission-level" aria-label="Permalink to &quot;Azure Permission Level&quot;">​</a></h2><p>Once your ImmyBot tenant has been linked to Azure, you can set the <strong>Azure Permission Level</strong> from the tenant Azure tab. This allows ImmyBot to:</p><ol><li>Sync all users from the Azure tenant</li><li>Sync all users from your GDAP customers <strong>(please see <a href="#gdap-customers">GDAP Customers</a>)</strong></li><li>Install the 365 applications a user is licensed for <ul><li>Apps for business/Apps for entrprise/Project/Visio</li></ul></li><li>Deploy software to Teams, On-Premises Security Groups <ul><li>Ex. Everyone in the Engineering Team gets AutoCAD 2022</li></ul></li></ol><p>The <strong>Azure Permission Level</strong> has two modes: <em>Default</em> and <em>Custom</em></p><p><strong>NB: In both the <em>Default</em> and <em>Custom</em> modes, consent must be provided for each customer you want to sync. Please see <a href="#gdap-customers">GDAP Customers</a> for requirements</strong></p><h3 id="default" tabindex="-1">Default <a class="header-anchor" href="#default" aria-label="Permalink to &quot;Default&quot;">​</a></h3><p>In this mode, you don&#39;t need to create an app registration. You consent as an administrator, allowing ImmyBot access users in your tenant and your customers tenants. <strong>Please see <a href="#gdap-customers">GDAP Customers</a> if you want ImmyBot to access your customers&#39; users</strong>.</p><h3 id="custom" tabindex="-1">Custom <a class="header-anchor" href="#custom" aria-label="Permalink to &quot;Custom&quot;">​</a></h3><p>In this mode, you create an App Registration and provide its Application (client) Id and Secret to ImmyBot, allowing you to customize the permissions Immy has to you and your customer&#39;s environments.</p><h4 id="create-an-app-registration" tabindex="-1">Create an App Registration <a class="header-anchor" href="#create-an-app-registration" aria-label="Permalink to &quot;Create an App Registration&quot;">​</a></h4><p>Navigate to: <a href="https://aad.portal.azure.com/" target="_blank" rel="noreferrer">https://aad.portal.azure.com/</a></p><p><img src="/assets/2020-12-07-15-46-18.DeHJW7MI.png" alt=""></p><p><img src="/assets/2020-12-07-15-47-07.D2JsNLB5.png" alt=""></p><p><img src="/assets/2022-12-12_10-42-55.m3LA6Cai.png" alt=""></p><p><strong>Important!</strong> Your app registration must have a Web redirect uri of <code>https://&lt;your-domain&gt;.immy.bot/consent-callback</code>, replacing <code>&lt;your-domain&gt;</code> appropriately</p><h4 id="grant-permissions" tabindex="-1">Grant Permissions <a class="header-anchor" href="#grant-permissions" aria-label="Permalink to &quot;Grant Permissions&quot;">​</a></h4><p>See the screenshots below for the minimum permissions.</p><p><img src="/assets/2020-12-07-15-47-33.D0KJ5TTo.png" alt=""></p><p><img src="https://github.com/immense/immybot-documentation/assets/1424395/24640a0d-b078-4575-8125-e035788f06e8" alt="image"></p><p><img src="https://github.com/immense/immybot-documentation/assets/1424395/f5c4ec0f-35f2-49ad-a690-7e940c187d0a" alt="image"></p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>Since they are commonly used, please note that the <code>DeviceManagementManagedDevices.ReadWrite.All</code> permission is required for MDM enrollment with the <strong>&quot;Join AzureAD&quot;</strong> and <strong>&quot;Configure Directory&quot;</strong> tasks.</p></div><h4 id="create-client-secret" tabindex="-1">Create Client Secret <a class="header-anchor" href="#create-client-secret" aria-label="Permalink to &quot;Create Client Secret&quot;">​</a></h4><p><img src="/assets/2021-08-16-13-19-15.BgjUtH5A.png" alt=""></p><p><img src="/assets/2021-08-16-13-20-45.CoA6pbo3.png" alt=""></p><p><img src="/assets/2021-08-16-13-23-26.Dui6prVy.png" alt=""></p><p><strong>Please see <a href="#gdap-customers">GDAP Customers</a> if you want ImmyBot to access your customers&#39; data</strong>.</p><h4 id="copy-the-application-client-id-and-client-secret-value-into-the-form-in-immybot" tabindex="-1">Copy the <code>Application (client) ID</code> and <code>Client Secret Value</code> into the form in ImmyBot. <a class="header-anchor" href="#copy-the-application-client-id-and-client-secret-value-into-the-form-in-immybot" aria-label="Permalink to &quot;Copy the `Application (client) ID` and `Client Secret Value` into the form in ImmyBot.&quot;">​</a></h4><h2 id="gdap-customers" tabindex="-1">GDAP Customers <a class="header-anchor" href="#gdap-customers" aria-label="Permalink to &quot;GDAP Customers&quot;">​</a></h2><p>To sync users from GDAP customers of your Azure Partner, permission must be granted in the customer tenants to Immy&#39;s app registration (<em>Default</em> or <em>Custom</em>). This can be achieved either by clicking on the <code>Consent</code> button for each customer individually (&quot;Manual consent&quot;) or by using the Pre-consent button (&quot;Pre-consent&quot;).</p><h3 id="manual-consent" tabindex="-1">Manual Consent <a class="header-anchor" href="#manual-consent" aria-label="Permalink to &quot;Manual Consent&quot;">​</a></h3><p>This can be done by clicking on the <code>Consent</code> or <code>Reconsent</code> button for the customer on either the Azure Settings page or ont he Azure tab of the ImmyBot tenat linked to the customer.</p><p><strong>NB: When manually consenting to an Azure customer, you must authenticate using an administrator account from that customer!</strong></p><h3 id="pre-consent" tabindex="-1">Pre-Consent <a class="header-anchor" href="#pre-consent" aria-label="Permalink to &quot;Pre-Consent&quot;">​</a></h3><p>Immy can automatically grant consent to your GDAP customers using the Partner Center API, removing the need to consent to each customer individually. To do this, you must authenticate to the Partner Center API with a user in the partner tenant that meets these requirements:</p><ol><li>Is a member of the <code>AdminAgents</code> security group</li><li>Is given the <code>Application administrator</code> and <code>Privileged role administrator</code> Entra roles at the customer through the GDAP relationship</li></ol><h4 id="example-gdap-role-assignments" tabindex="-1">Example: GDAP Role Assignments <a class="header-anchor" href="#example-gdap-role-assignments" aria-label="Permalink to &quot;Example: GDAP Role Assignments&quot;">​</a></h4><p>Here is an example GDAP relationship configuration that will work with Immy&#39;s pre-consent functionality:</p><ol><li>Create security group in the partner tenant named <code>Application Administrators</code></li><li>Create security group in the partner tenant named <code>Privileged Role Administrators</code></li><li>Assign the <code>Application administrator</code> Entra role to the <code>Application Administrators</code> security group on the customer&#39;s admin relationship</li><li>Assign the <code>Privileged role administrator</code> Entra role to the <code>Privileged Role Administrators</code> security group on the customer&#39;s admin relationship</li><li>Add the partner user that you wish to sign-in to the Partner Center API with to <code>AdminAgents</code>, <code>Application Administrators</code> and <code>Privileged Role Administrators</code> security groups</li></ol><p>For more information, see these Azure docs:</p><ul><li><a href="https://learn.microsoft.com/en-us/partner-center/gdap-obtain-admin-permissions-to-manage-customer" target="_blank" rel="noreferrer">Obtain permissions to manage customer</a></li><li><a href="https://learn.microsoft.com/en-us/partner-center/gdap-assign-microsoft-entra-roles" target="_blank" rel="noreferrer">Assign Microsoft Entra roles</a></li></ul><h2 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">​</a></h2><h3 id="consent" tabindex="-1">Consent <a class="header-anchor" href="#consent" aria-label="Permalink to &quot;Consent&quot;">​</a></h3><h4 id="aadsts500113-no-reply-address-is-registered-for-the-application" tabindex="-1">AADSTS500113: No reply address is registered for the application <a class="header-anchor" href="#aadsts500113-no-reply-address-is-registered-for-the-application" aria-label="Permalink to &quot;AADSTS500113: No reply address is registered for the application&quot;">​</a></h4><p>This error occurs when the redirect uri is not set correctly on the custom app registration. Please follow these steps to set the redirect uri correctly:</p><ol><li>Navigate to the <a href="https://portal.azure.com" target="_blank" rel="noreferrer">Azure Portal</a></li><li>Navigate to the <a href="https://portal.azure.com/#view/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/~/Overview" target="_blank" rel="noreferrer">Microsoft Entra ID blade</a></li><li>Navigate to the <a href="https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade" target="_blank" rel="noreferrer">App Registrations blade</a></li><li>Select the app registration you created for ImmyBot <ul><li>You may need to change the filter to &quot;All Applications&quot;</li><li>You can paste the Application (client) ID of your custom app registration into the search box to find it <img src="https://github.com/immense/immybot-documentation/assets/95599350/2021ff38-03cd-4132-88b4-bd70fcf8f861" alt="image"></li></ul></li><li>Navigate to the Authentication blade <ul><li>Select &quot;Add a platform&quot;</li><li>Select &quot;Web&quot; as the type <img src="https://github.com/immense/immybot-documentation/assets/95599350/a4ac66be-3353-45d6-af38-6d76c16dc303" alt="image"></li><li>Enter <code>https://&lt;your-domain&gt;.immy.bot/consent-callback</code> as the redirect uri, replacing <code>&lt;your-domain&gt;</code> appropriately</li><li>Click &quot;Configure&quot; <img src="https://github.com/immense/immybot-documentation/assets/95599350/292eef9f-fa2b-46ff-8834-b2ef2f24ae0f" alt="image"></li></ul></li></ol></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/halo-integration-setup.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous page</span><span class="title" data-v-1bcd8184>HaloPSA</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/scripts.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next page</span><span class="title" data-v-1bcd8184>Scripting Guide</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"add-users.md\":\"OaI5tNlY\",\"azure-graph-permissions-setup.md\":\"u0ErxUE8\",\"build-your-own-integration.md\":\"CbdX9QBf\",\"connectsecure-integration-setup.md\":\"DYoxe9u5\",\"connectwise-automate-integration-setup.md\":\"BbRfz9pz\",\"connectwise-control-integration-setup.md\":\"BR0Z4rIs\",\"connectwise-manage-integration-setup.md\":\"D3GpK0jK\",\"faq.md\":\"DBPJFJOd\",\"getting-started.md\":\"R7bijnbI\",\"halo-integration-setup.md\":\"fUk9jotu\",\"immy-commands.md\":\"v4hM1wNE\",\"index.md\":\"DZBl2ip8\",\"markdown-examples.md\":\"-m8imKgy\",\"ncentral-integration-setup.md\":\"UjBHxihl\",\"ninjarmm-integration-setup.md\":\"CgYbIjFr\",\"old-ncentral-integration-setup.md\":\"9C3B6NVP\",\"onboarding.md\":\"CrDuP4xI\",\"readme.md\":\"D38tZSjJ\",\"recommended-deployments.md\":\"CsGVHl4O\",\"releases-2020.md\":\"DPH-1fDz\",\"releases-2021.md\":\"BS1iS6In\",\"releases-2022.md\":\"HDb-adly\",\"releases.md\":\"BzGQfw9U\",\"scripts.md\":\"BPqcmelS\",\"terminology.md\":\"BKYbjGr-\",\"troubleshooting.md\":\"FVwCvhGW\",\"user-roles.md\":\"BawZctRj\",\"windows-sandbox.md\":\"c7d4kCuI\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"immy.bot\",\"description\":\"A documentation suite for all things ImmyBot\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"logo\":\"/immybot-glasses.png\",\"sidebar\":[{\"text\":\"Introduction\",\"collapsed\":false,\"items\":[{\"text\":\"Getting Started\",\"link\":\"/getting-started\"},{\"text\":\"What's New\",\"link\":\"/releases\"},{\"text\":\"Add Users\",\"link\":\"./add-users\"},{\"text\":\"Onboarding\",\"link\":\"./onboarding\"},{\"text\":\"Recommended Deployments\",\"link\":\"./recommended-deployments\"},{\"text\":\"Terminology\",\"link\":\"./terminology\"},{\"text\":\"Troubleshooting\",\"link\":\"./troubleshooting\"},{\"text\":\"User Roles\",\"link\":\"./user-roles\"},{\"text\":\"Windows Sandbox\",\"link\":\"./windows-sandbox\"}]},{\"text\":\"Integrations\",\"collapsed\":false,\"items\":[{\"text\":\"Build Your Own\",\"link\":\"/build-your-own-integration\"},{\"text\":\"ConnectSecure\",\"link\":\"/connectsecure-integration-setup\"},{\"text\":\"ConnectWise Automate\",\"link\":\"/connectwise-automate-integration-setup\"},{\"text\":\"ConnectWise Control\",\"link\":\"/connectwise-control-integration-setup\"},{\"text\":\"ConnectWise Manage\",\"link\":\"/connectwise-manage-integration-setup\"},{\"text\":\"N-Central\",\"link\":\"/ncentral-integration-setup\"},{\"text\":\"NinjaRMM\",\"link\":\"/ninjarmm-integration-setup\"},{\"text\":\"HaloPSA\",\"link\":\"/halo-integration-setup\"},{\"text\":\"Azure\",\"link\":\"/azure-graph-permissions-setup\"}]},{\"text\":\"Advanced\",\"collapsed\":false,\"items\":[{\"text\":\"Scripting Guide\",\"link\":\"/scripts\"},{\"text\":\"Metascripts / Cloud Scripts\",\"link\":\"/immy-commands\"}]},{\"text\":\"Frequently Asked Questions\",\"link\":\"/FAQ\"}],\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/immense/immybot-documentation\"}],\"search\":{\"provider\":\"algolia\",\"options\":{\"apiKey\":\"e84eee7e1fa61571b3814adfcb2a70f2\",\"indexName\":\"immy\",\"appId\":\"SU6GB55GXI\"}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>