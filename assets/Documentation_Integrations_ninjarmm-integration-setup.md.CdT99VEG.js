import{_ as t,c as e,ah as a,o as n}from"./chunks/framework.BWXOFiC5.js";const g=JSON.parse('{"title":"NinjaRMM Dynamic Integration","description":"","frontmatter":{},"headers":[],"relativePath":"Documentation/Integrations/ninjarmm-integration-setup.md","filePath":"Documentation/Integrations/ninjarmm-integration-setup.md"}'),s={name:"Documentation/Integrations/ninjarmm-integration-setup.md"};function o(l,i,r,p,h,c){return n(),e("div",null,i[0]||(i[0]=[a(`<h1 id="ninjarmm-dynamic-integration" tabindex="-1">NinjaRMM Dynamic Integration <a class="header-anchor" href="#ninjarmm-dynamic-integration" aria-label="Permalink to &quot;NinjaRMM Dynamic Integration&quot;">​</a></h1><h3 id="setting-up-this-integration-allows-you-to" tabindex="-1">Setting up this integration allows you to: <a class="header-anchor" href="#setting-up-this-integration-allows-you-to" aria-label="Permalink to &quot;Setting up this integration allows you to:&quot;">​</a></h3><ul><li>Import customers from NinjaRMM</li><li>Import computers from NinjaRMM</li><li>Manage all computers in NinjaRMM without deploying the ImmyBot Agent</li><li>Create ImmyBot Role in NinjaRMM</li></ul><h3 id="configure-the-following-in-general-settings-administration-general-settings" tabindex="-1">Configure the following in general settings (Administration -&gt; General -&gt; Settings): <a class="header-anchor" href="#configure-the-following-in-general-settings-administration-general-settings" aria-label="Permalink to &quot;Configure the following in general settings (Administration -&gt; General -&gt; Settings):&quot;">​</a></h3><ul><li>Ninja Agent uninstall prevention -&gt; OFF (Optional: This permission is only needed so ImmyBot can also uninstall the Ninja agent)</li><li>Advanced Installer Options -&gt; ON</li></ul><h3 id="immybot-currently-requires-the-following-client-app-scopes-to-operate-correctly" tabindex="-1">ImmyBot currently requires the following client app scopes to operate correctly: <a class="header-anchor" href="#immybot-currently-requires-the-following-client-app-scopes-to-operate-correctly" aria-label="Permalink to &quot;ImmyBot currently requires the following client app scopes to operate correctly:&quot;">​</a></h3><ul><li>Monitoring</li><li>Management</li><li>Control</li></ul><h3 id="as-well-as-the-following-grant-types" tabindex="-1">As well as the following grant types: <a class="header-anchor" href="#as-well-as-the-following-grant-types" aria-label="Permalink to &quot;As well as the following grant types:&quot;">​</a></h3><ul><li>Authorization Code</li><li>Refresh Token</li></ul><h2 id="create-a-client-app-in-your-ninjarmm-instance-using-above-permissions" tabindex="-1">Create a client app in your NinjaRMM instance using above permissions: <a class="header-anchor" href="#create-a-client-app-in-your-ninjarmm-instance-using-above-permissions" aria-label="Permalink to &quot;Create a client app in your NinjaRMM instance using above permissions:&quot;">​</a></h2><p>(<code>Administration</code> -&gt; <code>Apps</code> -&gt; <code>Api</code> -&gt; <code>Add</code>)</p><p><img src="https://github.com/user-attachments/assets/5a27d217-a574-4a34-b42a-dd9a984e2ce1" alt="image"></p><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>Note: Change the &quot;instance&quot; in the redirect uri to your ImmyBot subdomain</p></div><h2 id="copy-the-below-script-to-ninjarmm-automation-library-and-name-it-immybot" tabindex="-1">Copy the below script to NinjaRMM Automation library and name it ImmyBot: <a class="header-anchor" href="#copy-the-below-script-to-ninjarmm-automation-library-and-name-it-immybot" aria-label="Permalink to &quot;Copy the below script to NinjaRMM Automation library and name it ImmyBot:&quot;">​</a></h2><p>(<code>Administration</code> -&gt; <code>Library</code> -&gt; <code>Automation</code> -&gt; <code>Add</code> -&gt; <code>New Script</code>)</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Parameter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Mandatory</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">$true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]$code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$bytes </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">System.Convert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]::FromBase64String($code)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$DecodedCommand </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">System.Text.Encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]::UTF8.GetString($bytes)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Execute Script Content</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">iex $DecodedCommand</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Write-Host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Ephemeral Agent started&quot;</span></span></code></pre></div><p>Before leaving the script, also create a <code>Script Variable</code>.</p><ol><li>Hit <code>+ Add</code> next to <code>Script Variables</code>.</li><li>Select the <code>String/Text</code> type.</li><li>Enter <code>Code</code> as the variable name.</li><li>Hit <code>Add</code> to save it.</li></ol><p>Note the script Id in the URL <code>https://{region}.ninjarmm.com/#/editor/script/71</code> -&gt; <code>71</code>.<br> It will be needed as one of the parameters in the integration setup to run scripts.</p><h2 id="in-immybot-create-a-new-dynamic-integration-with-the-ninjarmm-integration-type" tabindex="-1">In ImmyBot, create a new dynamic integration with the NinjaRMM integration type: <a class="header-anchor" href="#in-immybot-create-a-new-dynamic-integration-with-the-ninjarmm-integration-type" aria-label="Permalink to &quot;In ImmyBot, create a new dynamic integration with the NinjaRMM integration type:&quot;">​</a></h2><p>(<code>Show More</code> -&gt; <code>Integrations</code> -&gt; <code>Add Integration</code> -&gt; <code>NinjaRMM</code>)</p><p>Add the required parameters and authenticate the OAuthInfo parameter with a NinjaRMM user with sufficient privileges: <img src="https://github.com/user-attachments/assets/78b760fd-b0f9-4230-9b3e-389d487dfea3" alt="image"></p><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>At this time Client IDs do not support special characters. Please create a new client app if one is generated for you.</p></div><div class="warning custom-block github-alert"><p class="custom-block-title">WARNING</p><p>Currently the UI element for the OAuthInfo parameter button will not persist when you refresh the browser window. This will not kill your integration, so just leave it as is.</p></div><p>At this point, you should be able to map clients. Once clients are mapped, agents will start getting identified.</p>`,25)]))}const m=t(s,[["render",o]]);export{g as __pageData,m as default};
