import{_ as i,c as o,ah as t,o as n}from"./chunks/framework.BWXOFiC5.js";const m=JSON.parse('{"title":"Azure Conditional Access Policies and Guidance","description":"","frontmatter":{},"headers":[],"relativePath":"Documentation/Integrations/azure-conditional-access-policies-and-guidance.md","filePath":"Documentation/Integrations/azure-conditional-access-policies-and-guidance.md"}'),a={name:"Documentation/Integrations/azure-conditional-access-policies-and-guidance.md"};function s(r,e,c,u,l,d){return n(),o("div",null,e[0]||(e[0]=[t(`<h1 id="azure-conditional-access-policies-and-guidance" tabindex="-1">Azure Conditional Access Policies and Guidance <a class="header-anchor" href="#azure-conditional-access-policies-and-guidance" aria-label="Permalink to &quot;Azure Conditional Access Policies and Guidance&quot;">​</a></h1><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>This document is intended to give you information on how to configure Conditional Access Policies (CAPs) to work with ImmyBot. In general, in order for ImmyBot to work with Azure and Intune Joining you will need to ensure that the DEM user you&#39;re using oAuth with is excluded from CAPs that cover device registration.</p><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><p>Admin access to your Azure tenant to review and change Conditional Access Policies.</p><h2 id="guidance" tabindex="-1">Guidance <a class="header-anchor" href="#guidance" aria-label="Permalink to &quot;Guidance&quot;">​</a></h2><p>We recommend excluding the DEM users you use for oAuth from the CAPs that protect the Device Registration Service (01cb2876-7ebd-4aa4-9cc9-d28bd4d359a9). In general you can exclude the user from all CAPs, and create a CAP that only effects this DEM user. This CAP would cover include All Resources, and exclude Device Registration Service.</p><h2 id="user-specific-conditional-access-policy" tabindex="-1">User Specific Conditional Access Policy <a class="header-anchor" href="#user-specific-conditional-access-policy" aria-label="Permalink to &quot;User Specific Conditional Access Policy&quot;">​</a></h2><p>This is a generic CAP works with ImmyBot&#39;s Azure requirements when utilizing AzureAD Join and Intune Enrollment.</p><p>Navigate to <a href="https://portal.azure.com/#view/Microsoft_AAD_ConditionalAccess/ConditionalAccessBlade/~/Policies" target="_blank" rel="noreferrer">Azure Portal</a></p><p>Create a Conditional Access Policy with the following settings</p><div class="info custom-block"><p class="custom-block-title">CAP Settings</p><pre>Name: ImmyBot DEM
Users:
    Include: *Your ImmyBot DEM user for this client*
    Exclude: None
Target Resources:
    Include: All Resources
    Exclude: Device Registration Service (01cb2876-7ebd-4aa4-9cc9-d28bd4d359a9)
Network: Not configured
Conditions: Not Configured
Grant:
    Grant Access:
      Require multifactor authentication
Session: Not Configured
</pre></div><h3 id="session-exceptions" tabindex="-1">Session Exceptions <a class="header-anchor" href="#session-exceptions" aria-label="Permalink to &quot;Session Exceptions&quot;">​</a></h3><p>If your security requirements necessitate configuring session settings, we recommend disabling the following options wherever feasible.</p><h4 id="sign-in-frequency" tabindex="-1">Sign in frequency <a class="header-anchor" href="#sign-in-frequency" aria-label="Permalink to &quot;Sign in frequency&quot;">​</a></h4><p>This is a hard requirement for a user to re-authenticate their sessions. If this is set and applied to your DEM users, it will make the tokens in ImmyBot expire and you will have to reauthenticate however often it&#39;s required by this setting.</p><h4 id="continuous-access" tabindex="-1">Continuous Access <a class="header-anchor" href="#continuous-access" aria-label="Permalink to &quot;Continuous Access&quot;">​</a></h4><p>This allows Microsoft to revoke a token at any time based on critical events or real-time policy evaluation. While this is a good option to use, it can cause issues with ImmyBot not being able to renew oAuth tokens, we recommend leaving this disabled for the CAP that covers your DEM users.</p><h4 id="token-protection" tabindex="-1">Token Protection <a class="header-anchor" href="#token-protection" aria-label="Permalink to &quot;Token Protection&quot;">​</a></h4><p>This requires all long-lived tokens to be bound to the device using software key binding or hardware security module binding where available. ImmyBot does not use static infrastructure resources, and as a result, this may cause your authentication tokens to become invalid if your instance is redeployed.</p><p><br><br><br></p><div class="note custom-block github-alert"><p class="custom-block-title">Document information</p><p>Author: Mark Gomez and Dakota Lewis-Mathews <br> Date Published: 9/10/2025 <br> Date Revised: N/A <br> Version Number: 1.0</p></div>`,22)]))}const p=i(a,[["render",s]]);export{m as __pageData,p as default};
