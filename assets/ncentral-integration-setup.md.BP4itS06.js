import{_ as e}from"./chunks/add_userrole_guide_1.DhZMaPzh.js";import{_ as t,a as o,b as a}from"./chunks/2021-03-23-19-08-30.VBYdH6Lk.js";import{_ as i,a as r}from"./chunks/2021-03-23-19-06-55.FPJppjlQ.js";import{_ as n,c as s,o as l,a6 as c}from"./chunks/framework.B49Yz1nR.js";const u="/assets/new_add_user_guide_1.DO-u8TLs.png",p="/assets/add_automation_policy_1.B_n4837M.png",m="/assets/add_automation_policy_2.Bch8ChRu.png",d="/assets/add_automation_policy_3.CShFrdiy.png",h="/assets/add_integration_guide_new_1.C_klLG9j.png",T=JSON.parse('{"title":"N-Central REST API Dynamic Integration","description":"","frontmatter":{},"headers":[],"relativePath":"ncentral-integration-setup.md","filePath":"ncentral-integration-setup.md"}'),y={name:"ncentral-integration-setup.md"},g=c('<div class="info custom-block"><p class="custom-block-title">INFO</p><p>This page is now dedicated to the new N-Central integration, utilizing the new N-Central REST API &amp; ImmyBot Dynamic Integrations.</p><p>This new integration should provide improved stability over our classic (and soon to be deprecated) integration.</p><p>Looking for the classic N-Central integration guide? We recommend against it, but here is <a href="/old-ncentral-integration-setup.html">the classic setup guide</a>.</p></div><h1 id="n-central-rest-api-dynamic-integration" tabindex="-1">N-Central REST API Dynamic Integration <a class="header-anchor" href="#n-central-rest-api-dynamic-integration" aria-label="Permalink to &quot;N-Central REST API Dynamic Integration&quot;">​</a></h1><p>Setting up this integration allows you to:</p><ol><li>Import customers from N-Central</li><li>Import computers from N-Central</li><li>Manage all computers in N-Central without deploying the ImmyBot Agent</li></ol><h2 id="create-immybot-role-in-n-central" tabindex="-1">Create ImmyBot Role in N-Central <a class="header-anchor" href="#create-immybot-role-in-n-central" aria-label="Permalink to &quot;Create ImmyBot Role in N-Central&quot;">​</a></h2><p>ImmyBot currently requires the following role permissions to operate correctly:</p><h3 id="devices" tabindex="-1">Devices <a class="header-anchor" href="#devices" aria-label="Permalink to &quot;Devices&quot;">​</a></h3><ul><li>Devices View <ul><li>All Devices -&gt; Read Only</li></ul></li><li>Scheduled Tasks <ul><li>Scheduled Tasks -&gt; Manage</li></ul></li><li>Downloads <ul><li>N-central Installers Download</li></ul></li></ul><p>Create an &quot;ImmyBot&quot; role in your N-Central instance using above roles. <img src="'+e+'" alt=""></p><p><img src="'+u+'" alt=""></p><h2 id="create-an-api-only-immybot-user-in-n-central" tabindex="-1">Create an API-Only ImmyBot user in N-Central <a class="header-anchor" href="#create-an-api-only-immybot-user-in-n-central" aria-label="Permalink to &quot;Create an API-Only ImmyBot user in N-Central&quot;">​</a></h2><p>N-Able themselves have an <a href="https://documentation.n-able.com/N-central/userguide/Content/User_Management/Role%20Based%20Permissions/role_based_permissions_create_APIuser.htm" target="_blank" rel="noreferrer">offical short guide for doing this we recommend following</a> for this part, but here is a recap:</p><ol><li>Create a new &quot;ImmyBot&quot; user in the instance with the &quot;ImmyBot&quot; role applied.</li><li>Set a password (it is required for now but the api team is working on removing this)</li><li>Under &quot;Access Groups&quot;, add an Access Group that covers all of your tenants (or at least an access group that covers the tenants you want to have access to in ImmyBot)</li><li>Under &quot;API Access&quot;, ensure &quot;Api-Only User&quot; is checked. <u>2FA MUST be disabled for the API User!</u></li><li>Save the new ImmyBot user, and press the &quot;Generate JSON Web Token&quot; button. Copy this value somewhere for later.</li></ol><p><strong>IMPORTANT</strong> - Right now, the password for the api user needs to be reset every 90 days. Your integration will stop working if you do not reset the password. The api team has also mentioned they are looking to remove this functionality for api users.</p><h2 id="add-the-necessary-runscript-automation-policy" tabindex="-1">Add the necessary &#39;RunScript&#39; Automation Policy <a class="header-anchor" href="#add-the-necessary-runscript-automation-policy" aria-label="Permalink to &quot;Add the necessary &#39;RunScript&#39; Automation Policy&quot;">​</a></h2><p>After completing the new API-Only user setup, it&#39;s time time add an Automation Policy to N-Central so Immybot can run scripts on the machines.</p><p>First, navigate to the &quot;Script/Software Repository&quot; under &quot;Schedules Tasks&quot; beneath the &quot;Configuration&quot; tab in N-Central. Once at the Script Repository page, select &quot;Add&quot; -&gt; &quot;Automation Policy&quot;. <img src="'+p+'" alt=""></p><p>Second, <a href="https://docs.immy.bot/ImmyBotRunScriptV2.amp" target="_self">download the ImmyBot RunScript Automation Policy</a> and upload it to your instance. Fill out the Name and Description how you see fit if required. <img src="'+m+'" alt=""></p><p>Last step is to ensure this new automation policy we have uploaded is able to be invoked by the Immybot API User. Find the automation by searching for &quot;Immybot&quot;, then flipping the <code>Enable API</code> switch. Accept the confirmation modal, then copy the <code>Repository ID</code> for later use.</p><div class="warning custom-block"><p class="custom-block-title">Make sure you copy YOUR <code>Repository ID</code>, as this identifier for the automation policy will be unique across every N-Central instance!</p></div><p><img src="'+d+'" alt=""></p><h2 id="add-integration-for-n-central" tabindex="-1">Add integration for N-Central <a class="header-anchor" href="#add-integration-for-n-central" aria-label="Permalink to &quot;Add integration for N-Central&quot;">​</a></h2><p>After completing setup in N-Central, it&#39;s time to add the integration to ImmyBot. Navigate to the &quot;Integrations&quot; page in ImmyBot, and create a new <code>N-Central v2</code> integration. Input a name you&#39;d like for the integration, followed by your N-Central server URL, and the <code>JWT</code> you copied in the steps to make an &quot;ImmyBot&quot; API user. Then, input the <code>RepositoryId</code> gathered from the step before. Lastly, flip the <code>Enable Integration</code> switch.</p><div class="warning custom-block"><p class="custom-block-title">If the <code>Health Check</code> reports an error after enabling the integration, ensure you have completed the above steps correctly. If you continue to have issues, reachout to the community or support for assistance.</p></div><p><strong>If your error message contains &quot;Unable to validate UI session: javax.validation.ValidationException: Unable to validate UI session.&quot;, then reset the password on your api user and generate a new JWT. This is a limitation imposed by N-Central</strong></p><p><img src="'+h+'" alt=""></p><h2 id="import-your-customers" tabindex="-1">Import your customers <a class="header-anchor" href="#import-your-customers" aria-label="Permalink to &quot;Import your customers&quot;">​</a></h2><p><img src="'+t+'" alt=""></p><p><img src="'+o+'" alt=""></p><p>Alternatively, you can create/map only certain customers.</p><p>When you map a customer from an RMM, the computers will undergo Identification</p><p><img src="'+i+'" alt=""></p><p><img src="'+r+'" alt=""></p><p><img src="'+a+'" alt=""></p><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="my-customers-are-showing-up-but-no-computers" tabindex="-1">My customers are showing up but no computers <a class="header-anchor" href="#my-customers-are-showing-up-but-no-computers" aria-label="Permalink to &quot;My customers are showing up but no computers&quot;">​</a></h3><p>Login to N-Central as the ImmyBot User and accept the EULA</p><h3 id="unable-to-validate-ui-session" tabindex="-1">Unable to validate UI session <a class="header-anchor" href="#unable-to-validate-ui-session" aria-label="Permalink to &quot;Unable to validate UI session&quot;">​</a></h3><p>If your error message contains &quot;Unable to validate UI session: javax.validation.ValidationException: Unable to validate UI session.&quot;, then reset the password on your api user and generate a new JWT. Passwords are required to be reset every 90 days, even for api users - <a href="https://github.com/ToschAutomatisering/PS-NCentral/issues/5" target="_blank" rel="noreferrer">https://github.com/ToschAutomatisering/PS-NCentral/issues/5</a>. This is a limitation imposed by N-Central that will hopefully be addressed in a future release.</p>',39),b=[g];function _(f,I,q,v,w,A){return l(),s("div",null,b)}const S=n(y,[["render",_]]);export{T as __pageData,S as default};
